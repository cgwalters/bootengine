[Unit]
Description=Generate new UUID for disk GPT %I
DefaultDependencies=no
Before=local-fs-pre.target systemd-fsck-root.service
Wants=systemd-udevd.service
After=systemd-udevd.service
Requires=%i.device
After=%i.device
# Run before services that use device nodes, preventing them from racing
# with udev activity generated by sgdisk
Before=ignition-setup-base.service ignition-setup-user.service ignition-ostree-rootfs-save.service ignition-disks.service

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=/usr/sbin/coreos-gpt-setup %I
